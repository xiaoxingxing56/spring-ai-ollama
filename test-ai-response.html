<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI å›å¤è§£ææµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .message {
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }
        
        .message-content {
            flex: 1;
            padding: 12px 16px;
            border-radius: 18px;
            background: white;
            border: 1px solid #e0e0e0;
            border-bottom-left-radius: 4px;
        }
        
        .ai-thinking {
            background: #f0f8ff !important;
            border: 1px solid #b3d9ff !important;
            border-bottom-left-radius: 4px;
            margin-bottom: 8px;
            padding: 12px;
        }
        
        .ai-thinking-header {
            font-size: 12px;
            color: #0066cc;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .ai-thinking-content {
            font-size: 13px;
            color: #555;
            line-height: 1.4;
            font-style: italic;
        }
        
        .ai-thinking-icon {
            width: 16px;
            height: 16px;
            background: #0066cc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
        }
        
        .message-time {
            font-size: 11px;
            color: #999;
            margin-top: 4px;
        }
        
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        .test-button:hover {
            background: #5a6fd8;
        }
        
        .raw-response {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>ğŸ¤– AI å›å¤è§£ææµ‹è¯•</h1>
    
    <div class="test-container">
        <h3>æµ‹è¯•ç”¨ä¾‹</h3>
        <button class="test-button" onclick="testCase1()">æµ‹è¯•ç”¨ä¾‹1: åŒ…å«æ€è€ƒè¿‡ç¨‹</button>
        <button class="test-button" onclick="testCase2()">æµ‹è¯•ç”¨ä¾‹2: ç®€å•å›å¤</button>
        <button class="test-button" onclick="testCase3()">æµ‹è¯•ç”¨ä¾‹3: å¤æ‚æ€è€ƒ</button>
        <button class="test-button" onclick="clearTest()">æ¸…é™¤æµ‹è¯•</button>
    </div>
    
    <div id="testResults"></div>
    
    <script>
        function parseAIResponse(response) {
            // æ£€æŸ¥æ˜¯å¦åŒ…å«æ€è€ƒè¿‡ç¨‹ï¼ˆé€šå¸¸åœ¨ <think> æ ‡ç­¾ä¸­ï¼‰
            const thinkMatch = response.match(/<think>([\s\S]*?)<\/think>/i);
            
            if (thinkMatch) {
                const thinking = thinkMatch[1].trim();
                const finalResponse = response.replace(/<think>[\s\S]*?<\/think>/gi, '').trim();
                return { thinking, finalResponse };
            }
            
            // å¦‚æœæ²¡æœ‰æ˜ç¡®çš„æ€è€ƒæ ‡ç­¾ï¼Œå°è¯•å…¶ä»–æ¨¡å¼
            const lines = response.split('\n');
            const thinkingLines = [];
            const responseLines = [];
            let inThinking = false;
            
            for (const line of lines) {
                const trimmedLine = line.trim();
                
                // æ£€æµ‹æ€è€ƒè¿‡ç¨‹çš„å¼€å§‹
                if (trimmedLine.toLowerCase().includes('think') || 
                    trimmedLine.toLowerCase().includes('æ€è€ƒ') ||
                    trimmedLine.toLowerCase().includes('åˆ†æ') ||
                    trimmedLine.toLowerCase().includes('è€ƒè™‘')) {
                    inThinking = true;
                    thinkingLines.push(trimmedLine);
                    continue;
                }
                
                // æ£€æµ‹æ€è€ƒè¿‡ç¨‹çš„ç»“æŸ
                if (inThinking && (trimmedLine.includes('</think>') || 
                    trimmedLine.includes('å› æ­¤') || 
                    trimmedLine.includes('æ‰€ä»¥') ||
                    trimmedLine.includes('æ€»ç»“'))) {
                    inThinking = false;
                    responseLines.push(trimmedLine);
                    continue;
                }
                
                if (inThinking) {
                    thinkingLines.push(trimmedLine);
                } else {
                    responseLines.push(trimmedLine);
                }
            }
            
            const thinking = thinkingLines.join('\n').trim();
            const finalResponse = responseLines.join('\n').trim();
            
            return { thinking, finalResponse };
        }
        
        function addAIResponse(response, title) {
            const resultsDiv = document.getElementById('testResults');
            
            const container = document.createElement('div');
            container.className = 'test-container';
            
            const titleDiv = document.createElement('h4');
            titleDiv.textContent = title;
            container.appendChild(titleDiv);
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            
            // è§£æAIå›å¤ï¼Œåˆ†ç¦»æ€è€ƒè¿‡ç¨‹å’Œæœ€ç»ˆå›å¤
            const { thinking, finalResponse } = parseAIResponse(response);
            
            // å¦‚æœæœ‰æ€è€ƒè¿‡ç¨‹ï¼Œå…ˆæ˜¾ç¤ºæ€è€ƒå†…å®¹
            if (thinking) {
                const thinkingDiv = document.createElement('div');
                thinkingDiv.className = 'ai-thinking';
                
                const thinkingHeader = document.createElement('div');
                thinkingHeader.className = 'ai-thinking-header';
                thinkingHeader.innerHTML = `
                    <div class="ai-thinking-icon">ğŸ’­</div>
                    AI æ€è€ƒè¿‡ç¨‹
                `;
                
                const thinkingContent = document.createElement('div');
                thinkingContent.className = 'ai-thinking-content';
                thinkingContent.textContent = thinking;
                
                thinkingDiv.appendChild(thinkingHeader);
                thinkingDiv.appendChild(thinkingContent);
                messageContent.appendChild(thinkingDiv);
            }
            
            // æ˜¾ç¤ºæœ€ç»ˆå›å¤
            const finalResponseDiv = document.createElement('div');
            finalResponseDiv.textContent = finalResponse;
            
            const messageTime = document.createElement('div');
            messageTime.className = 'message-time';
            messageTime.textContent = new Date().toLocaleTimeString();
            
            finalResponseDiv.appendChild(messageTime);
            messageContent.appendChild(finalResponseDiv);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            container.appendChild(messageDiv);
            
            // æ˜¾ç¤ºåŸå§‹å“åº”
            const rawDiv = document.createElement('div');
            rawDiv.className = 'raw-response';
            rawDiv.textContent = 'åŸå§‹å“åº”:\n' + response;
            container.appendChild(rawDiv);
            
            resultsDiv.appendChild(container);
        }
        
        function testCase1() {
            const response = `<think>
Okay, the user asked "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½". I need to provide a comprehensive explanation of artificial intelligence.

First, I should define what AI is - the simulation of human intelligence by machines. Then I should explain the key components like machine learning, neural networks, and deep learning.

I should also mention the different types of AI: narrow AI (specific tasks) and general AI (human-like intelligence). It's important to give examples of AI applications in daily life.

I should structure the response clearly, starting with a definition, then explaining the types, and finally giving examples. Keep it accessible but informative.
</think>

äººå·¥æ™ºèƒ½ï¼ˆArtificial Intelligenceï¼Œç®€ç§°AIï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œæ—¨åœ¨åˆ›å»ºèƒ½å¤Ÿæ¨¡æ‹Ÿäººç±»æ™ºèƒ½è¡Œä¸ºçš„ç³»ç»Ÿã€‚

**ä¸»è¦ç±»å‹ï¼š**
1. **ç‹­ä¹‰AIï¼ˆNarrow AIï¼‰**ï¼šä¸“æ³¨äºç‰¹å®šä»»åŠ¡ï¼Œå¦‚è¯­éŸ³è¯†åˆ«ã€å›¾åƒå¤„ç†
2. **é€šç”¨AIï¼ˆGeneral AIï¼‰**ï¼šå…·å¤‡äººç±»èˆ¬çš„é€šç”¨æ™ºèƒ½ï¼ˆä»åœ¨å‘å±•ä¸­ï¼‰

**æ ¸å¿ƒæŠ€æœ¯ï¼š**
- æœºå™¨å­¦ä¹ ï¼ˆMachine Learningï¼‰
- æ·±åº¦å­¦ä¹ ï¼ˆDeep Learningï¼‰
- ç¥ç»ç½‘ç»œï¼ˆNeural Networksï¼‰

**åº”ç”¨é¢†åŸŸï¼š**
- è¯­éŸ³åŠ©æ‰‹ï¼ˆå¦‚Siriã€Alexaï¼‰
- è‡ªåŠ¨é©¾é©¶æ±½è½¦
- åŒ»ç–—è¯Šæ–­
- æ¨èç³»ç»Ÿ

AIæ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼ï¼Œä½†ä»åœ¨å¿«é€Ÿå‘å±•ä¸­ã€‚`;
            
            addAIResponse(response, 'æµ‹è¯•ç”¨ä¾‹1: åŒ…å«æ€è€ƒè¿‡ç¨‹çš„AIå›å¤');
        }
        
        function testCase2() {
            const response = `ä½ å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œå¾ˆé«˜å…´ä¸ºä½ æœåŠ¡ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ å›ç­”é—®é¢˜ã€æä¾›ä¿¡æ¯æˆ–è¿›è¡Œå¯¹è¯äº¤æµã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ`;
            
            addAIResponse(response, 'æµ‹è¯•ç”¨ä¾‹2: ç®€å•å›å¤ï¼ˆæ— æ€è€ƒè¿‡ç¨‹ï¼‰');
        }
        
        function testCase3() {
            const response = `<think>
ç”¨æˆ·é—®äº†ä¸€ä¸ªå…³äºå¤©æ°”çš„é—®é¢˜ã€‚æˆ‘éœ€è¦è€ƒè™‘å‡ ä¸ªæ–¹é¢ï¼š

1. é¦–å…ˆï¼Œæˆ‘æ²¡æœ‰å®æ—¶çš„å¤©æ°”æ•°æ®è®¿é—®æƒé™
2. æˆ‘åº”è¯¥è¯šå®åœ°å‘Šè¯‰ç”¨æˆ·æˆ‘çš„é™åˆ¶
3. æˆ‘å¯ä»¥æä¾›ä¸€äº›å…³äºå¦‚ä½•è·å–å¤©æ°”ä¿¡æ¯çš„å»ºè®®
4. ä¿æŒå‹å¥½å’Œæœ‰ç”¨çš„æ€åº¦

è®©æˆ‘ç»„ç»‡ä¸€ä¸ªæ¸…æ™°çš„å›å¤ï¼Œå…ˆæ‰¿è®¤æˆ‘çš„é™åˆ¶ï¼Œç„¶åæä¾›æœ‰ç”¨çš„å»ºè®®ã€‚
</think>

æŠ±æ­‰ï¼Œæˆ‘æ— æ³•æä¾›å®æ—¶çš„å¤©æ°”ä¿¡æ¯ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰è®¿é—®å½“å‰å¤©æ°”æ•°æ®çš„èƒ½åŠ›ã€‚

ä¸è¿‡ï¼Œæˆ‘å¯ä»¥å»ºè®®ä½ ï¼š
- æŸ¥çœ‹æ‰‹æœºä¸Šçš„å¤©æ°”åº”ç”¨
- è®¿é—®å¤©æ°”ç½‘ç«™å¦‚å¤©æ°”é€šã€å¢¨è¿¹å¤©æ°”
- ä½¿ç”¨è¯­éŸ³åŠ©æ‰‹è¯¢é—®å¤©æ°”

å¦‚æœä½ æœ‰å…¶ä»–é—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„å¸®åŠ©ä½ ï¼`;
            
            addAIResponse(response, 'æµ‹è¯•ç”¨ä¾‹3: å¤æ‚æ€è€ƒè¿‡ç¨‹');
        }
        
        function clearTest() {
            document.getElementById('testResults').innerHTML = '';
        }
    </script>
</body>
</html> 